#!/usr/bin/env php
<?php

$dir = __DIR__ . '/..';

if (!file_exists($dir . '/autoload.php')) {
    $dir = __DIR__ . '/../vendor';
}

if (!file_exists($dir . '/autoload.php')) {
    $dir = './vendor';
}

if (!file_exists($dir . '/autoload.php')) {
    $dir = __DIR__ . '/../../..';
}

if (!file_exists($dir . '/autoload.php')) {
    echo 'Autoload.php not found.';
    exit(1);
}

require_once $dir . '/autoload.php';

use Protoqol\Quark\Commands\GenerateMigrationCommand;
use Protoqol\Quark\Commands\RunMigrationsCommand;
use Protoqol\Quark\Commands\SetExecutableCommand;
use Symfony\Component\Console\Application;

$GLOBALS['ROOT_DIR'] = getcwd();

$quark = new Application('<href=https://github.com/QuintenJustus/QuarkDev><options=bold,reverse,underscore>Quark Database</></></>');

$quark->addCommands([
    (new SetExecutableCommand()),
    (new GenerateMigrationCommand()),
    (new RunMigrationsCommand()),
]);

$quark->run();

?>
